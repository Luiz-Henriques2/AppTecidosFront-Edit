<h2>Cadastro de <span>Tecido</span>.</h2>
<form 
    (ngSubmit)="submit()"
    [formGroup]="tecidoForm" 
    #formDir="ngForm"

>   <div class="form-floating mb-3">
    <input type="text" class="form-control" placeholder=" " formControlName="nome" required>
    <label for="floatingInput">Nome do Tecido:</label>

    <div *ngIf="nome.invalid && formDir.submitted">
        <div class="alert alert-danger" role="alert" *ngIf="nome.errors?.['required']">
            O nome do Tecido é obrigatório.
        </div>
    </div>
  </div>
  <div class="form-floating mb-3">
    <input type="text" class="form-control" placeholder=" " formControlName="composicao">
    <label for="floatingInput">Composição:</label>
  </div>
  <div class="form-floating mb-3">
    <input type="text" class="form-control" placeholder=" " formControlName="gramatura" pattern>
    <label for="floatingInput">Gramatura:</label>
    <div *ngIf="gramatura.invalid && formDir.submitted">
        <p *ngIf="gramatura.errors?.['pattern']" class="alert alert-danger" role="alert" >Esse campo só aceita números.</p>
    </div>
  </div>
    <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder=" " formControlName="rendimento" pattern>
        <label for="floatingInput">Rendimento:</label>
        <div *ngIf="rendimento.invalid && formDir.submitted">
            <p *ngIf="rendimento.errors?.['pattern']" class="alert alert-danger" role="alert" >Esse campo só aceita números menores que 100.</p>
        </div>
    </div>

      <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder=" " formControlName="acabamento">
        <label for="floatingInput">Acabamento:</label>
      </div>

      <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder=" " formControlName="prazoentrega" pattern>
        <label for="floatingInput">Prazo de entrega:</label>
        <div *ngIf="prazoentrega.invalid && formDir.submitted">
            <p *ngIf="prazoentrega.errors?.['pattern']" class="alert alert-danger" role="alert" >Esse campo só aceita números.</p>
        </div>
      </div>
      <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder=" " formControlName="prazodesenvolvimento" pattern>
        <label for="floatingInput">Prazo de desenvolvimento:</label>
        <div *ngIf="prazodesenvolvimento.invalid && formDir.submitted">
            <p *ngIf="prazodesenvolvimento.errors?.['pattern']" class="alert alert-danger" role="alert" >Esse campo só aceita números.</p>
        </div>
      </div>

      <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder=" " formControlName="avista" pattern>
        <label for="floatingInput">Preço À Vista:</label>
        <div *ngIf="avista.invalid && formDir.submitted">
            <p *ngIf="avista.errors?.['pattern']" class="alert alert-danger" role="alert" >Esse campo só aceita números.</p>
        </div>
      </div>

      <div class="form-floating mb-3">
        <input type="text" class="form-control" placeholder=" " formControlName="prazo" pattern>
        <label for="floatingInput">Preço A Prazo</label>
        <div *ngIf="prazo.invalid && formDir.submitted">
        <p *ngIf="prazo.errors?.['pattern']" class="alert alert-danger" role="alert" >Esse campo só aceita números.</p>
        </div>
      </div>

      <div class="form-floating">
        <textarea class="form-control" placeholder=" " id="floatingTextarea2" style="height: 100px" formControlName="observacao"></textarea>
        <label for="floatingTextarea2">Complemento:</label>
      </div>

      <label for="floatingTextarea2">Fornecedor:</label>
      <select class="form-select" aria-label="Default select example" formControlName="fornecedor_id" (change)="referenciaValidatorf()" (change)="onFornecedorSelected()" name="maxID" [(ngModel)]="maxID" required>
          <option *ngFor="let fornecedor of fornecedores" [value]="fornecedor.id" >{{ fornecedor.nome }}</option>
      </select>
      <div *ngIf="fornecedor_id.invalid && formDir.submitted">
        <div class="alert alert-danger" role="alert" *ngIf="fornecedor_id.errors?.['required']">
            Campo obrigatório.
        </div>
    </div>

    <div class="form-floating mb-3" *ngIf="maxID!=0">
      <input type="text" class="form-control" placeholder=" " formControlName="referencia" [(ngModel)]="referenciaValue" required>
      <label for="floatingInput">Referencia:</label>
      <div *ngIf="referencia.invalid && formDir.submitted" class="alert alert-danger" role="alert">
        Já existe um tecido cadastrado com a mesma referência e fornecedor.
      </div>
    </div>



      <label for="floatingTextarea2">Favorito:</label>
      <select class="form-select" aria-label="Default select example" formControlName="favoritar" >
          <option [value]="1" > Sim </option>
          <option [value]="0" > Não </option>
      </select>

      <label for="floatingTextarea2">Característica:</label>
      <select class="form-select" aria-label="Default select example" formControlName="caracteristica" >
        <option > Tela </option>
        <option > Textura com brilho </option>
        <option > Textura sem brilho </option>
        <option > Tule </option>
        <option > Liso </option>
        <option > Estampado </option>
        <option > Platinado </option>
    </select>

    <ly-checkbox formControlName="uv" class="checkbox">UV</ly-checkbox>
    <ly-checkbox formControlName="dry" class="checkbox">DRY</ly-checkbox>
    <ly-checkbox formControlName="insect" class="checkbox">INSECT</ly-checkbox>
    <ly-checkbox formControlName="smart" class="checkbox">SMART</ly-checkbox>
    <ly-checkbox formControlName="defense" class="checkbox">DEFENSE</ly-checkbox>
    <ly-checkbox formControlName="chlomax" class="checkbox">CHLOMAX</ly-checkbox>
    <ly-checkbox formControlName="hydro" class="checkbox">HYDRO</ly-checkbox>
    <ly-checkbox formControlName="eco" class="checkbox">ECO</ly-checkbox>
    <ly-checkbox formControlName="shield" class="checkbox">SHIELD</ly-checkbox>
    <ly-checkbox formControlName="undertech" class="checkbox">UNDERTECH</ly-checkbox>
    <ly-checkbox formControlName="ultraflex" class="checkbox">ULTRAFLEX</ly-checkbox>
    <ly-checkbox formControlName="durabilidade" class="checkbox">DURABILIDADE</ly-checkbox>
    <ly-checkbox formControlName="toqueaveludado" class="checkbox">TOQUE AVELUDADO</ly-checkbox>
    <ly-checkbox formControlName="respirabilidade" class="checkbox">RESPIRABILIDADE</ly-checkbox>
    <ly-checkbox formControlName="duplaface" class="checkbox">DUPLA FACE</ly-checkbox>
    <ly-checkbox formControlName="leveza" class="checkbox">LEVEZA</ly-checkbox>
    <ly-checkbox formControlName="altacobertura" class="checkbox">ALTA COBERTURA</ly-checkbox>
    <ly-checkbox formControlName="elasticidade" class="checkbox">ELASTICIDADE</ly-checkbox>
    <ly-checkbox formControlName="secagemrapida" class="checkbox">SECAGEM RÁPIDA</ly-checkbox>
    <ly-checkbox formControlName="toquegelado" class="checkbox">TOQUE GELADO</ly-checkbox>
    <ly-checkbox formControlName="toquemacio" class="checkbox">TOQUE MACIO</ly-checkbox>
    <ly-checkbox formControlName="toquedebrilho" class="checkbox">TOQUE DE BRILHO</ly-checkbox>
    <ly-checkbox formControlName="zerotransparencia" class="checkbox">ZERO TRANSPARÊNCIA</ly-checkbox>
    <ly-checkbox formControlName="naoesgarca" class="checkbox">NÃO ESGARÇA</ly-checkbox>
    <ly-checkbox formControlName="naopinica" class="checkbox">NÃO PINICA</ly-checkbox>
    <ly-checkbox formControlName="oekotex" class="checkbox">OEKO-TEX</ly-checkbox>
    <ly-checkbox formControlName="compressao" class="checkbox">COMPRESSÃO FIRME</ly-checkbox>
    <ly-checkbox formControlName="controledeodor" class="checkbox">CONTROLE DE ODOR</ly-checkbox>
    
<!--------
    <div class="mb-3">
        <label for="formFile" class="form-label">Foto do tecido:</label>
        <input class="form-control" type="file" id="formFile" (change)="OnFileSelected($event)">
      </div>
------------------------------------------->
      <input #_fileInput type="file" (change)="openCropperDialog($event)" accept="image/*" hidden>
    <a ly-button class="botao" (click)="_fileInput.click()" >
      <ly-icon [lyMf]="1">image</ly-icon>
      <span>Selecione a Imagem</span>
    </a>
    <div *ngIf="cropped"><img class="timg" [src]="cropped"></div>
<!--------------------------------------------------->
    <button type="submit" class="btn btn-primary">Cadastrar</button>
    <div *ngIf="
    prazo.invalid || 
    avista.invalid || 
    referencia.invalid ||
    prazodesenvolvimento.invalid ||
    prazoentrega.invalid ||
    rendimento.invalid || 
    gramatura.invalid || nome.invalid && formDir.submitted">
    <p class="alert alert-danger" role="alert" >
        Um ou mais campos foram preenchidos incorretamente durante o cadastro.</p>
     </div>
</form>